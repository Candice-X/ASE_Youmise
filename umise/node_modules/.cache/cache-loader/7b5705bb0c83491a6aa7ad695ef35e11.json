{"remainingRequest":"/Users/kuer/Documents/GitHub/ASE_Youmise/umise/node_modules/babel-loader/lib/index.js!/Users/kuer/Documents/GitHub/ASE_Youmise/umise/node_modules/vue-loader/lib/selector.js?type=script&index=0!/Users/kuer/Documents/GitHub/ASE_Youmise/umise/src/components/Friends.vue","dependencies":[{"path":"/Users/kuer/Documents/GitHub/ASE_Youmise/umise/src/components/Friends.vue","mtime":1524549591709},{"path":"/Users/kuer/Documents/GitHub/ASE_Youmise/umise/package.json","mtime":1524551041812},{"path":"/Users/kuer/Documents/GitHub/ASE_Youmise/umise/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/kuer/Documents/GitHub/ASE_Youmise/umise/node_modules/babel-loader/lib/index.js","mtime":1519636541000},{"path":"/Users/kuer/Documents/GitHub/ASE_Youmise/umise/node_modules/vue-loader/lib/selector.js","mtime":1520395331000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/kuer/Documents/GitHub/ASE_Youmise/umise/node_modules/@babel/runtime/helpers/asyncToGenerator\";\nimport _objectSpread from \"/Users/kuer/Documents/GitHub/ASE_Youmise/umise/node_modules/@babel/runtime/helpers/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { required, email } from 'vuelidate/lib/validators';\nimport FriendsList from './FriendsList';\nimport axios from \"axios\";\nimport { mapActions } from \"vuex\";\nexport default {\n  data: function data() {\n    return {\n      email: '',\n      isReceiveModel: 'received',\n      errorMsg: '',\n      friendId: '',\n      cards: [],\n      //this is for create record\n      oneCard: {\n        recordid: '',\n        senderid: null,\n        senderName: '',\n        receiverid: null,\n        cardid: null,\n        createDate: null,\n        expireDate: null,\n        finishDate: null,\n        cardTitle: '',\n        cardContent: '',\n        status: null,\n        cardImgURL: null,\n        senderImg: this.$store.state.card.girl,\n        receiverEmail: '',\n        receiverName: ''\n      }\n    };\n  },\n  validations: {\n    email: {\n      email: email,\n      required: required\n    }\n  },\n  methods: _objectSpread({\n    addFriends: function () {\n      var _addFriends = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var response;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                this.errorMsg = \"\";\n\n                if (!(this.$store.state.user.userID != null)) {\n                  _context.next = 10;\n                  break;\n                }\n\n                this.$store.state.user.loading = true;\n                _context.next = 6;\n                return axios.post(\"/friend/sendFriendRequest\", {\n                  \"senderId\": this.$store.state.user.userID,\n                  \"receiverEmail\": this.email\n                });\n\n              case 6:\n                response = _context.sent;\n                // console.log(response);\n                this.$store.state.user.loading = false;\n                jQuery(\"#add_friends\").modal('hide');\n                this.showAlert();\n\n              case 10:\n                ;\n                _context.next = 18;\n                break;\n\n              case 13:\n                _context.prev = 13;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(_context.t0.response.data);\n                this.errorMsg = _context.t0.response.data;\n                this.$store.state.user.loading = false;\n\n              case 18:\n                ;\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 13]]);\n      }));\n\n      return function addFriends() {\n        return _addFriends.apply(this, arguments);\n      };\n    }(),\n    showReceivedCard: function () {\n      var _showReceivedCard = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var userID, friendId, response;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.isReceiveModel = 'received';\n                userID = this.$store.state.user.userID || localStorage.getItem(\"userID\");\n                friendId = this.$store.state.user.currentFriendId;\n                console.log(\"show received card:\", userID);\n                _context2.prev = 4;\n\n                if (!(userID && friendId)) {\n                  _context2.next = 14;\n                  break;\n                }\n\n                this.$store.state.user.loading = true;\n                _context2.next = 9;\n                return axios.get(\"/record/record/receiver/\".concat(userID, \"/friend/\").concat(friendId));\n\n              case 9:\n                response = _context2.sent;\n                this.cards = response.data;\n                this.$store.state.user.loading = false;\n                _context2.next = 14;\n                break;\n\n              case 14:\n                ;\n                _context2.next = 21;\n                break;\n\n              case 17:\n                _context2.prev = 17;\n                _context2.t0 = _context2[\"catch\"](4);\n                console.log(_context2.t0.response.data);\n                this.$store.state.user.loading = false;\n\n              case 21:\n                ;\n\n              case 22:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[4, 17]]);\n      }));\n\n      return function showReceivedCard() {\n        return _showReceivedCard.apply(this, arguments);\n      };\n    }(),\n    showSendCard: function () {\n      var _showSendCard = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        var userID, friendId, response;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.isReceiveModel = 'sent';\n                userID = this.$store.state.user.userID || localStorage.getItem(\"userID\");\n                friendId = this.$store.state.user.currentFriendId;\n                console.log(\"show send card friend id:\", friendId);\n                _context3.prev = 4;\n\n                if (!(userID && friendId)) {\n                  _context3.next = 14;\n                  break;\n                }\n\n                this.$store.state.user.loading = true;\n                _context3.next = 9;\n                return axios.get(\"/record/record/sender/\".concat(userID, \"/friend/\").concat(friendId));\n\n              case 9:\n                response = _context3.sent;\n                // this.cards = response.data;\n                this.cards = response.data;\n                this.$store.state.user.loading = false;\n                _context3.next = 14;\n                break;\n\n              case 14:\n                ;\n                _context3.next = 22;\n                break;\n\n              case 17:\n                _context3.prev = 17;\n                _context3.t0 = _context3[\"catch\"](4);\n                this.errorMsg = _context3.t0.response.data;\n                console.log(_context3.t0.response.data);\n                this.$store.state.user.loading = false;\n\n              case 22:\n                ;\n\n              case 23:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[4, 17]]);\n      }));\n\n      return function showSendCard() {\n        return _showSendCard.apply(this, arguments);\n      };\n    }()\n  }, mapActions(['']), {\n    // show card diagram\n    showCard: function () {\n      var _showCard = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4(index) {\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.oneCard = this.cards[index];\n\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      return function showCard(_x) {\n        return _showCard.apply(this, arguments);\n      };\n    }(),\n    showAlert: function () {\n      var _showAlert = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee5() {\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                jQuery(\".friend_alert\").fadeIn();\n                setTimeout(function () {\n                  jQuery(\".friend_alert\").fadeOut();\n                }, 3500);\n\n              case 2:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      return function showAlert() {\n        return _showAlert.apply(this, arguments);\n      };\n    }(),\n    // send card \n    // record status:\n    // 1: 有效的卡片，具有收卡人，发卡人，在有效期内，\n    // 2：已发送但是没有接收人，\n    // 3： 邀请卡类型，接收人为多人（不建议新增这个状态。。。）\n    // 4： 过期卡\n    // 5： 已使用\n    // 6： 使用中，等待对方确认(这个多余了， 确认以后再update就好了\n    useCard: function () {\n      var _useCard = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee6() {\n        var userID, response;\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                userID = this.$store.state.user.userID || localStorage.getItem(\"userID\"); // let rec = this.onCard.recordid;\n\n                console.log(\"record:\", this.oneCard); // console.log(\"onecard\",this.oneCard);\n                // console.log(`/record/record/${recordid}`);\n\n                _context6.prev = 2;\n\n                if (!userID) {\n                  _context6.next = 21;\n                  break;\n                }\n\n                if (!(this.oneCard.status === 1)) {\n                  _context6.next = 8;\n                  break;\n                }\n\n                this.oneCard.status = 6;\n                _context6.next = 13;\n                break;\n\n              case 8:\n                if (!(this.oneCard.status === 6)) {\n                  _context6.next = 12;\n                  break;\n                }\n\n                //mark as complete\n                this.oneCard.status = 5;\n                _context6.next = 13;\n                break;\n\n              case 12:\n                return _context6.abrupt(\"return\", \"status cannot change\");\n\n              case 13:\n                jQuery(\"#friend_cards_specific\").modal('hide');\n                this.oneCard[\"title\"] = this.oneCard.receiverName + \" want to use the \" + this.oneCard.cardTitle;\n                this.oneCard[\"msgContent\"] = this.oneCard.receiverName + \" want to use the \" + this.oneCard.cardTitle + \" which you sent to him/her at \" + this.oneCard.createDate.tostring(0, 10) + \". Last time you said: \" + this.oneCard.cardContent;\n                _context6.next = 18;\n                return axios.patch(\"/record/record/\".concat(this.oneCard.recordid), this.oneCard);\n\n              case 18:\n                response = _context6.sent;\n                jQuery(\".card_send_alert\").fadeIn();\n                setTimeout(function () {\n                  jQuery(\".card_send_alert\").fadeOut();\n                }, 3500);\n\n              case 21:\n                ;\n                _context6.next = 27;\n                break;\n\n              case 24:\n                _context6.prev = 24;\n                _context6.t0 = _context6[\"catch\"](2);\n                console.log(\"usercard: \", _context6.t0.response.data);\n\n              case 27:\n                ;\n\n              case 28:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[2, 24]]);\n      }));\n\n      return function useCard() {\n        return _useCard.apply(this, arguments);\n      };\n    }()\n  }),\n  components: {\n    FriendsList: FriendsList\n  },\n  created: function created() {\n    this.$store.state.isLogin = true;\n  }\n};",{"version":3,"sources":["Friends.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0JA;AACA;AACA;AACA,AACA,SACA;AAEA;wBAEA;;aAEA;sBACA;gBACA;gBAEA;aACA;AACA;;kBAEA;kBACA;oBACA;oBACA;gBACA;oBACA;oBACA;oBACA;mBACA;qBACA;gBACA;oBACA;0CACA;uBACA;sBACA,AAIA,AACA;AApBA;AARA;AA8BA;;;AAGA;AACA,AACA,AAEA;AALA;AADA;AAOA;AACA,AACA;;;;;;;;;;gCACA;;uDACA;;;;;iDAEA;;;qDAEA;wCACA,AAEA;AAJA;;;;AAKA;iDACA;6CACA;qBACA;;;AAEA,AACA;;;;;;;iDACA;qDACA;iDACA;;;AACA,AAEA;;;;;;;;;;;;;;AACA;;;;;;;;;sCACA;+EACA;kDACA;mDACA,AACA;;;gCACA;;;;;iDACA;;8FACA;;;;sCAEA;iDACA,AAEA;;;;;AAEA,AACA;;;;;;;kDACA;iDACA;;;AACA,AAEA;;;;;;;;;;;;;;AACA;;;;;;;;;sCAEA;+EACA;kDACA;yDACA,AACA;;;gCACA;;;;;iDACA;;4FACA;;;;AACA;sCAEA;iDACA,AAEA;;;;;AAEA,AACA;;;;;;;sDACA;kDACA;iDAEA;;;AAEA,AAEA;;;;;;;;;;;;;;iBACA;AACA;;;;gDACA;;;;;0CACA,AAEA;;;;;;;;;;;;;;AACA;;;;;;;;wCACA;uCACA;0CACA;mBACA,AACA;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;+EAEA,WACA;;4CACA,UAEA;AACA,AACA;;;;qBACA;;;;;8CACA;;;;;sCACA;;;;;8CACA;;;;;AACA;sCACA,AACA;;;;;kDACA,AACA;;;uDAEA;uGACA;4GACA,yFACA,wCACA;;yFAEA;;;;2CACA;uCACA;6CACA;mBAEA;;;AAEA,AACA;;;;;;;gEACA;;;AACA,AAEA,AAEA;;;;;;;;;;;;;;;;AAEA,AACA;AAFA;8BAGA;gCACA;AAEA;AApLA","file":"Friends.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id='friends'>\n    <!--- body -->\n    <div id=\"my_cards\" class=\"body_cont\">\n      <div class=\"send_cards_container\">\n        <h4 class=\"title\">Card Communication </h4>\n        <h4 class=\"subTitle\">Card history with friends, the received card and card sent from each other </h4>\n  \n        <center>\n          <button class=\"btn btn-primary btn-outline-success\" :class=\"{ active: isReceiveModel==='received' }\" \n          @click=\"showReceivedCard\">Received</button>\n          <button class=\"btn btn-primary btn-outline-success\" :class=\"{ active: isReceiveModel ==='sent' }\" \n          @click=\"showSendCard\">Sent</button>\n        </center>\n        <div class=\"row\">\n          <div class=\"empty_msg\" style=\"\" v-if=\"cards.length===0\">\n            You don't have any Card right now <br/>\n            <router-link class=\"btn btn-secondary btn-primary\" to=\"/dashboard\">\n              Send Card to Friends </router-link>\n          </div>\n  \n          <div v-for=\"(card, index) in cards\" :key=\"index\" class=\"col-xl-4 col-lg-6 col-md-6 col-sm-12 col-xs-12 card_cont card_cont_mobile\">\n            <div class=\"card_img\" data-toggle=\"modal\" data-target=\"#friend_cards_specific\" @click=\"showCard(index)\">\n              <img v-bind:src=\"card.cardImgURL\" />\n  \n              <div class=\"sender_cont\">\n                <div class='avatar'>\n                  <img src=\"../assets/img/girl.png\" />\n                </div>\n                <div class=\"content\">\n                  <h4>{{ card.cardTitle }}</h4>\n                  <p class=\"sub_title\">{{ card.senderName }}</p>\n                  <span class=\"time\">{{card.createDate.substring(0,10)}}</span>\n                </div>\n  \n              </div>\n  \n            </div>\n          </div>\n  \n  \n        </div>\n      </div>\n      <!-- alert message -->\n      <div class=\"friend_alert\" style=\"display:none;\">\n        <p> Friend request send to {{this.email}} Successfully! </p>\n      </div>\n      <!-- end of alert -->\n      <!-- alert message -->\n      <div class=\"card_send_alert\" style=\"display:none;\">\n        <p> {{this.oneCard.cardTitle}} send to {{this.oneCard.sender}} Successfully! </p>\n      </div>\n      <!-- end of alert -->\n  \n  \n    </div>\n    <friends-list v-on:refreshFriendCards=\"showReceivedCard\"></friends-list>\n    <!-- Modal -->\n    <div class=\"modal fade bd-example-modal\" id=\"add_friends\" tabindex=\"-2\" role=\"dialog\" \n    aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\n      <div class=\"modal-dialog modal modal-dialog-centered\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\" id=\"exampleModalLongTitle\">Add New Friend</h5>\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n          <div class=\"modal-body\">\n  \n            <label for=\"inputEmailfriend\">Friends Email address</label>\n            <input v-model=\"email\" id=\"inputEmailfriend\" class=\"form-control col-sm-12\" placeholder=\"Email address\" \n            @blur=\"$v.email.$touch()\" style=\"margin-bottom:0px;\">\n            <p style=\"display:block;height:25px;color:red;\">{{errorMsg}}</p>\n  \n            <button class=\"btn btn-primary btn-success btn-send  col-sm-12\" :disabled=\"$v.email.$invalid\" \n            style=\"margin-bottom:20px;\" @click=\"addFriends\">Add a New Friends</button>\n  \n  \n          </div>\n  \n        </div>\n  \n      </div>\n    </div>\n    <!-- end of add new friend Modal -->\n  \n  \n    <!-- Modal -->\n    <div class=\"modal fade bd-example-modal-lg\" id=\"friend_cards_specific\" tabindex=\"-1\" role=\"dialog\" \n    aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\" style=\"background:rgba(1,1,1,0.6)\">\n      <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" style=\"width:350px;padding:0;border:0;margin:auto\">\n        <div class=\"modal-content\" style=\"background:none;\">\n  \n          <div class=\"modal-body\" style=\"height:557px;\">\n            <div class=\" card_cont \">\n  \n              <div class=\"card_img card_img_more\">\n                <img v-bind:src=\"this.oneCard.cardImgURL\" />\n                <div class=\"sender_cont sender_cont_one \">\n                  <div class='avatar one_avatar'>\n                    <img src=\"../assets/img/girl.png\" />\n                    <p class=\"userName\">{{ this.oneCard.senderName }}</p>\n                  </div>\n                  <div class=\"content_one one_send_cont\">\n                    <!-- <h4>{{ this.oneCard.cardTitle }}</h4>\n                                  <p class=\"sub_title\">{{ this.oneCard.senderName}}</p> -->\n                    <p>{{this.oneCard.cardContent}}</p>\n  \n                  </div>\n  \n                </div>\n                <div class=\"promise_msg\">\n                  <p>{{this.oneCard.cardNote}}</p>\n                </div>\n              </div>\n              <!-- use card -->\n              <div>\n                <div v-if=\"isReceiveModel==='received' && this.oneCard.status ===1\" class=\"use_card \" @click=\"useCard\">\n                  <a> Use This Promise Card</a>\n                </div>\n  \n                <div v-if=\"this.oneCard.status ===5\" class=\"use_card \" style=\"background:pink;\">\n                  <a> Promise Completed</a>\n                </div>\n                <div v-if=\" this.oneCard.status ===6 && this.$store.state.user.userID !== this.oneCard.receiverid\" \n                class=\"use_card \" style=\"background:green;\">\n                  <a> Promise Card in Using</a>\n  \n                </div>\n                <div v-if=\"this.oneCard.status ===6 && this.$store.state.user.userID === this.oneCard.receiverid \" \n                class=\"use_card \" @click=\"useCard\">\n                  <a> Mark Promise Complete</a>\n                </div>\n                <div v-if=\"this.oneCard.status ===4\" class=\"use_card \" style=\"background:red;\">\n                  <a> Promise Card Expired</a>\n                </div>\n                <div v-if=\"isReceiveModel==='sent' && this.oneCard.status ===1\" class=\"use_card \" style=\"\">\n                  <a> Promise Card Sent to Friend</a>\n                </div>\n              </div>\n              <!-- end use card -->\n  \n            </div>\n          </div>\n  \n        </div>\n      </div>\n    </div>\n    <!-- end of card one --> \n  </div>\n</template>\n\n<script>  \n  import { required, email } from 'vuelidate/lib/validators';\n  import FriendsList from './FriendsList';\n  import axios from \"axios\";\n  import {\n    mapActions\n  } from \"vuex\";\n  \n  export default {\n    data() {\n      return {\n        email: '',\n        isReceiveModel: 'received',\n        errorMsg: '',\n        friendId: '',\n  \n        cards: [],\n        //this is for create record\n        oneCard: {\n          recordid: '',\n          senderid: null,\n          senderName: '',\n          receiverid: null,\n          cardid: null,\n          createDate: null,\n          expireDate: null,\n          finishDate: null,\n          cardTitle: '',\n          cardContent: '',\n          status: null,\n          cardImgURL: null,\n          senderImg: this.$store.state.card.girl,\n          receiverEmail: '',\n          receiverName: '',\n        },\n  \n  \n  \n      };\n    },\n  \n    validations: {\n      email: {\n        email,\n        required,\n      },\n    },\n  \n    methods: {\n      async addFriends() {\n        try {\n          this.errorMsg = \"\";\n          if (this.$store.state.user.userID != null) {\n            this.$store.state.user.loading = true;\n  \n            const response = await axios.post(\"/friend/sendFriendRequest\", {\n              \"senderId\": this.$store.state.user.userID,\n              \"receiverEmail\": this.email\n            });\n  \n            // console.log(response);\n            this.$store.state.user.loading = false;\n            jQuery(\"#add_friends\").modal('hide');\n            this.showAlert();\n          };\n  \n        } catch (e) {\n          console.log(e.response.data);\n          this.errorMsg = e.response.data;\n          this.$store.state.user.loading = false;\n        };\n      },\n  \n      async showReceivedCard() {\n        this.isReceiveModel = 'received';\n        const userID = this.$store.state.user.userID || localStorage.getItem(\"userID\");\n        const friendId = this.$store.state.user.currentFriendId;\n        console.log(\"show received card:\", userID);\n        try {\n          if (userID && friendId) {\n            this.$store.state.user.loading = true;\n            const response = await axios.get(`/record/record/receiver/${userID}/friend/${friendId}`);\n            this.cards = response.data;\n  \n            this.$store.state.user.loading = false;\n          } else {\n  \n          };\n  \n        } catch (e) {\n          console.log(e.response.data);\n          this.$store.state.user.loading = false;\n        };\n      },\n  \n      async showSendCard() {\n        this.isReceiveModel = 'sent';\n  \n        const userID = this.$store.state.user.userID || localStorage.getItem(\"userID\");\n        const friendId = this.$store.state.user.currentFriendId;\n        console.log(\"show send card friend id:\", friendId);\n        try {\n          if (userID && friendId) {\n            this.$store.state.user.loading = true;\n            const response = await axios.get(`/record/record/sender/${userID}/friend/${friendId}`);\n            // this.cards = response.data;\n            this.cards = response.data;\n  \n            this.$store.state.user.loading = false;\n          } else {\n  \n          };\n  \n        } catch (e) {\n          this.errorMsg = e.response.data;\n          console.log(e.response.data);\n          this.$store.state.user.loading = false;\n  \n        };\n  \n      },\n  \n      ...mapActions(['']),\n      // show card diagram\n      async showCard(index) {\n        this.oneCard = this.cards[index];\n      },\n  \n      async showAlert() {\n        jQuery(\".friend_alert\").fadeIn();\n        setTimeout(() => {\n          jQuery(\".friend_alert\").fadeOut();\n        }, 3500);\n      },\n      // send card \n      // record status:\n      // 1: 有效的卡片，具有收卡人，发卡人，在有效期内，\n      // 2：已发送但是没有接收人，\n      // 3： 邀请卡类型，接收人为多人（不建议新增这个状态。。。）\n      // 4： 过期卡\n      // 5： 已使用\n      // 6： 使用中，等待对方确认(这个多余了， 确认以后再update就好了\n      async useCard() {\n        const userID = this.$store.state.user.userID || localStorage.getItem(\"userID\");\n  \n        // let rec = this.onCard.recordid;\n        console.log(\"record:\", this.oneCard);\n        // console.log(\"onecard\",this.oneCard);\n  \n        // console.log(`/record/record/${recordid}`);\n        try {\n          if (userID) {\n            if (this.oneCard.status === 1) {\n              this.oneCard.status = 6;\n            } else if (this.oneCard.status === 6) {\n              //mark as complete\n              this.oneCard.status = 5;\n            } else {\n              return \"status cannot change\";\n            }\n            jQuery(\"#friend_cards_specific\").modal('hide');\n  \n            this.oneCard[\"title\"] = this.oneCard.receiverName + \" want to use the \" + this.oneCard.cardTitle;\n            this.oneCard[\"msgContent\"] = this.oneCard.receiverName + \" want to use the \" + this.oneCard.cardTitle + \n            \" which you sent to him/her at \" + this.oneCard.createDate.tostring(0, 10) + \". Last time you said: \" + \n            this.oneCard.cardContent;\n            const response = await axios.patch(`/record/record/${this.oneCard.recordid}`, this.oneCard);\n  \n            jQuery(\".card_send_alert\").fadeIn();\n            setTimeout(() => {\n              jQuery(\".card_send_alert\").fadeOut();\n            }, 3500);\n  \n          };\n  \n        } catch (e) { \n          console.log(\"usercard: \", e.response.data);\n        };\n      },\n\n    },\n  \n    components: {\n      FriendsList,\n    },\n    created: function() {\n      this.$store.state.isLogin = true;\n    },\n  \n  };\n</script>\n\n<style scoped>\n  @import \"../assets/css/font-awesome.min.css\";\n  @import \"../assets/css/simple-line-icons.css\";\n  .empty_msg {\n    margin: auto;\n    text-align: center;\n    margin-top: 10em;\n    color: white;\n    font-size: 1rem;\n  }\n  \n  .friend_alert {\n    margin: auto;\n    z-index: 99;\n    text-align: center;\n    width: 30rem;\n    background: #ffc9aa;\n    border-radius: 5px;\n    height: 5rem;\n    position: fixed;\n    top: 0px;\n    left: 0px;\n    bottom: 0px;\n    right: 0px;\n    font-size: 0.9em;\n  }\n  \n  .friend_alert p {\n    padding: 0;\n    text-align: center;\n    margin-top: 1rem;\n    padding-top: 1em;\n    line-height: 2em;\n    display: block;\n  }\n  \n  .send_cards_container button {\n    color: #ffffff;\n    margin-left: 15px;\n  }\n  \n  .sender_cont {\n    width: 100%;\n    text-align: left;\n    margin-top: 0;\n    padding: 0;\n  }\n  \n  .avatar {\n    position: relative;\n    top: -10px;\n    display: inline-block;\n    width: 40px;\n    height: 40px;\n    padding: 0;\n    margin-left: 10px;\n  }\n  \n  .avatar img {\n    width: 40px;\n    height: 40px !important;\n    border-radius: 50% !important;\n  }\n  \n  .content {\n    width: 150px;\n    margin-left: 8px;\n    display: inline-block;\n    line-height: 1em;\n  }\n  \n  .card_cont {\n    /* background:#dcdcdc; */\n    display: block;\n    width: auto;\n    padding: 0;\n    margin: 0px;\n    margin-top: 15px;\n    margin-bottom: 10px;\n    border-radius: 5px;\n  }\n  \n  .row {\n    width: auto;\n    padding: 0;\n    margin: 0;\n    margin-left: 20px;\n    padding-bottom: 50px;\n    margin-bottom: 200px;\n  }\n  \n  .card_img {\n    width: 220px;\n    margin: 10px 25px;\n    background: #dcdcdc;\n    height: 320px;\n    border-radius: 5px;\n  }\n  \n  .card_img:hover {\n    background: #3ac17e;\n    opacity: 0.9;\n    cursor: pointer;\n    border: 2px dashed #fff;\n    color: #fff;\n  }\n  \n  .customize-icon-cont {\n    border: 4px dashed #fff;\n    width: 220px;\n    margin: 10px 25px;\n    background: rgba(0, 0, 0, 0.2);\n    height: 320px;\n    border-radius: 5px;\n    color: #fff;\n    color: #fff;\n  }\n  \n  .customize-icon-cont i {\n    font-size: 6em;\n    text-align: center;\n    position: relative;\n    top: 80px;\n  }\n  \n  .customize-icon {\n    opacity: 0.8;\n    border-radius: 5px 5px 0 0;\n    width: 100%;\n    height: 180px;\n  }\n  \n  .card_cont img {\n    border-radius: 5px 5px 0 0;\n    width: 100%;\n    height: 260px;\n  }\n  \n  .send_cards_container {\n    height: auto;\n    margin-top: 50px;\n    margin-left: 0rem;\n  }\n  \n  .title {\n    text-align: left;\n    font-size: 1.8em;\n    color: #fff;\n    margin-left: 50px;\n  }\n  \n  .subTitle {\n    color: #ddd;\n    font-size: 0.9em;\n    margin-left: 50px;\n    text-align: left;\n  }\n  \n  #friends {\n    width: 100%;\n    height: 100%;\n    position: relative;\n    display: block;\n    background: #f0f3f6;\n    background: url(\"../assets/img/bg1.jpg\") no-repeat center center fixed;\n    -webkit-background-size: cover;\n    -moz-background-size: cover;\n    -o-background-size: cover;\n    background-size: cover;\n    height: 100vh;\n    min-height: 786px;\n    overflow-x: hidden;\n  }\n  \n  @media (min-width: 992px) {\n    .send_cards_container {\n      height: auto;\n      margin-top: 0px;\n      margin-left: 0rem;\n    }\n  }\n  \n  h1 {\n    font-size: 6rem;\n    line-height: 5.5rem;\n  }\n  \n  h2 {\n    font-size: 3.5rem;\n  }\n  \n  .card_img h4 {\n    margin-top: 8px;\n    font-size: 0.9rem;\n  }\n  \n  .card_img p {\n    font-size: 0.7rem;\n  }\n  \n  .subheading {\n    font-weight: 500;\n    font-size: 1.35rem;\n  }\n  \n  li {\n    text-align: left;\n    font-size: 0.8rem;\n    margin: 5px;\n    padding: 2px;\n  }\n  \n  li:hover {\n    background: #aaa;\n    color: #000;\n    border-radius: 3px;\n  }\n  \n  li a {\n    color: #ffffff;\n  }\n  \n  li:hover,\n  a:hover {\n    color: #fff !important;\n  }\n  \n  .nav_active {\n    background: #3ac17e !important;\n    color: #ffffff;\n    border-radius: 3px;\n  }\n  \n  li:active {\n    background: #3ac17e;\n    color: #ffffff;\n    border-radius: 3px;\n  }\n  \n  section.resume-section {\n    border-bottom: 1px solid #dee2e6;\n    padding-top: 5rem !important;\n    padding-bottom: 5rem !important;\n  }\n  \n  section.resume-section .resume-item .resume-date {\n    min-width: none;\n  }\n  \n  @media (min-width: 768px) {\n    section.resume-section {\n      min-height: 100vh;\n    }\n    section.resume-section .resume-item .resume-date {\n      min-width: 18rem;\n    }\n    .send_cards_container {\n      width: auto;\n      height: auto;\n      margin-left: 0rem;\n      margin-top: 55px;\n    }\n    .body_cont {\n      height: 100%;\n      position: relative;\n      display: block;\n      margin-left: 0rem;\n      /* min-height: 775px; */\n    }\n  }\n  \n  @media (min-width: 992px) {\n    section.resume-section {\n      padding-top: 3rem !important;\n      padding-bottom: 3rem !important;\n    }\n    .body_cont {\n      height: 100%;\n      position: relative;\n      display: block;\n      margin-top: 0px !important;\n      padding-left: 17rem !important;\n      padding-right: 15rem !important;\n      /* min-height: 775px; */\n    }\n  }\n  \n  .bg-primary {\n    background-color: rgba(0, 0, 0, 0.7) !important;\n  }\n  \n  i {\n    margin-left: 15px;\n    margin-right: 25px;\n  }\n  \n  .text-primary {\n    color: #000 !important;\n  }\n  \n  .js-scroll-trigger {\n    color: #ffffff !important;\n  }\n  \n  .profile-usertitle-name {\n    color: #eeeeee;\n  }\n  \n  .body_cont {\n    height: 100%;\n    width: 100%;\n    position: relative;\n    display: block;\n    float: left;\n    /* min-height: 775px;  */\n  }\n  \n  .form-label-group.invalid input {\n    border: 1px solid red;\n    background: #ffc9aa;\n  }\n  \n  .promise_msg {\n    word-wrap: normal;\n    width: 210px;\n    height: 110px;\n    overflow: hidden;\n    position: relative;\n    color: #fff;\n    font-size: 0.9em;\n    margin: auto;\n    top: -260px;\n    text-align: left;\n    line-height: 1.5em;\n  }\n  \n  .use_card {\n    display: block;\n    z-index: 999;\n    /* opacity:0.8; */\n    position: relative;\n    width: 330px;\n    margin-top: -3px;\n    border-radius: 0 0 5px 5px;\n    color: #fff;\n    height: 60px;\n    padding: 5px;\n    padding-top: 15px;\n    background: #3ac17e;\n    cursor: pointer;\n    font-size: 1.2em;\n  }\n  \n  .user_card:hover {\n    background: red;\n  }\n  \n  .card_img_more {\n    width: 330px;\n    /* margin: 10px 25px; */\n    background: #3ac17e;\n    height: 500px;\n    margin: 0;\n    border-radius: 5px;\n    border: 2px dashed #fff;\n    color: #fff;\n  }\n  \n  .card_img_more:hover {\n    /* background: #3ac17e; */\n    /* opacity: 1; */\n    cursor: pointer;\n    border: 2px dashed #fff;\n    color: #fff;\n  }\n  \n  \n  /* .card_img_more:hover + .use_card{\n    display:block;\n    background:red;\n  } */\n  \n  .card_img_more img {\n    border-radius: 5px 5px 0 0;\n    width: 100%;\n    height: 500px;\n  }\n  \n  .userName {\n    color: #fff;\n    font-size: 0.8em;\n    text-align: center;\n  }\n  \n  .content_one {\n    width: 240px;\n    height: 80px;\n    font-size: 0.8em;\n    padding: 5px;\n    background: #dcdcdc;\n    border-radius: 5px;\n    color: #222;\n    margin-left: 8px;\n    display: inline-block;\n    word-wrap: normal;\n    line-height: 1.5em;\n    padding-top: 5px;\n    opacity: 1;\n    margin-left: 10px;\n    overflow: hidden;\n  }\n  \n  .message_more {\n    background: #eeeeee;\n    border-radius: 5px;\n    display: block;\n    text-align: left;\n    padding: 15px;\n    margin: 10px;\n    height: 100px;\n    font-size: 0.85em;\n    overflow: hidden;\n    margin-bottom: 20px;\n  }\n  \n  .one_send_cont {\n    margin-top: 10px;\n  }\n  \n  .one_avatar {\n    float: left;\n    margin-top: 20px;\n  }\n  \n  .sender_cont_one {\n    position: relative;\n    margin-top: -100px;\n  }\n  \n  .time {\n    float: right;\n    height: 20px;\n    font-size: 10px;\n    margin-top: -18px;\n    color: #555;\n  }\n  \n  @media (max-width:786px) {\n    #friends {\n      padding-top: 55px;\n    }\n    .modal-content {\n      margin: 0;\n      padding: 0;\n      margin-top: 50px;\n    }\n    .modal-body {\n      height: 100% !important;\n    }\n    .card_img_more {\n      margin: auto;\n    }\n  }\n</style>\n"]}]}